<template>
  <table class="calendar-grid">
    <template for:each={calendarWeeksData} for:item="week">
      <tr key={week.weekKey}>
        <template for:each={week.days} for:item="dayObj">
          <td
            key={dayObj.dateString}
            class={dayObj.calendarDayClass}
            data-date={dayObj.dateString}
            onclick={handleDateClick}>
            <div class={dayObj.dayNumberClass}>{dayObj.day}</div>

            <template if:true={dayObj.hasEvents}>
              <div class="events-container">
                <template for:each={dayObj.events} for:item="event">
                  <div key={event.id} class="event-item">
                    <div class="event-title">
                      <div class="event-info">
                        <h3>{event.title}</h3>
                        <p class="event-time">{event.time}</p>
                        <p>{event.participants}</p>
                      </div>
                    </div>
                    <div class="event-actions">
                      <button
                        class="event-action-btn edit-btn"
                        data-event-id={event.id}
                        onclick={handleEditEvent}
                        title="Edit event">
                        ✏️
                      </button>
                      <button
                        class="event-action-btn delete-btn"
                        data-event-id={event.id}
                        onclick={handleDeleteEvent}
                        title="Delete event">
                        🗑️
                      </button>
                    </div>
                  </div>
                </template>
              </div>
            </template>
          </td>
        </template>
      </tr>
    </template>
  </table>
</template>
